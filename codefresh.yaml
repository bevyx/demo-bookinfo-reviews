version: '1.0'
steps:
  gradle:
    image: gradle:4.8.1
    entrypoint: "gradle clean build"
  build:
    type: build
    image_name: bevyx/demo-bookinfo-reviews
    build_arguments:
      - service_version=${{CF_BRANCH_TAG_NORMALIZED}}
    working_directory: ./
    tag: ${{CF_BRANCH_TAG_NORMALIZED}}
  push:
    type: push
    candidate: ${{build}}
    tag: ${{CF_BRANCH_TAG_NORMALIZED}}
    registry: dockerhub